"use strict";var t=this&&this.__awaiter||function(e,n,l,a){return new(l=l||Promise)(function(r,t){function o(e){try{s(a.next(e))}catch(e){t(e)}}function i(e){try{s(a.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?r(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(o,i)}s((a=a.apply(e,n||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.initWeeks=exports.flagView=exports.isView=exports.viewFlag=exports.hasLayoutArea=exports.addLayoutHideCls=exports.layoutHideCls=exports.onceEmitter=exports.viewportOffset=exports.nodeRect=exports.clearAnimated=exports.applyAnimated=exports.severalTicks=exports.nextTick=exports.circularDiff=exports.warn=exports.isSkyline=void 0;let o=require("./constants"),r=require("../utils/shared"),e=e=>"skyline"===e,i=(exports.isSkyline=e,()=>{}),s=(exports.warn=i,(e,t)=>{var r=Math.floor(o.CALENDAR_PANELS/2);return e<t-r&&(e+=o.CALENDAR_PANELS),t+r<e&&(e-=o.CALENDAR_PANELS),e-t}),n=(exports.circularDiff=s,t=>new Promise(e=>{wx.nextTick(()=>{e(null==t?void 0:t())})})),l=(exports.nextTick=n,e=>t(void 0,void 0,void 0,function*(){for(;e--;)yield(0,exports.nextTick)()})),a=(exports.severalTicks=l,(e,r,o,i)=>new Promise(t=>{e.applyAnimatedStyle(r,o,i,e=>{t(e.styleId)})})),p=(exports.applyAnimated=a,(t,r,o)=>new Promise(e=>{t.clearAnimatedStyle(r,o,()=>{e()})})),c=(exports.clearAnimated=p,e=>{let i=e.createSelectorQuery().in(e);return o=>new Promise((t,r)=>{i.selectAll(o).boundingClientRect(e=>{e.length?t(e):r("view not found by selector "+o)}).exec()})}),x=(exports.nodeRect=c,t=>new Promise(e=>{t.createSelectorQuery().selectViewport().scrollOffset(e).exec()})),u=(exports.viewportOffset=x,(t,r)=>{let o=0;return{emit:function(...e){o++||t.triggerEvent(r,...e)},cancel:function(){o++}}}),d=(exports.onceEmitter=u,"wc--hide-"),w=t=>null!=t&&t.length?o.FULL_LAYOUT.filter(e=>!t.includes(e)).map(e=>""+d+e).join(" "):"",f=(exports.layoutHideCls=w,(e,t)=>new RegExp(""+d+t+"\\s*").test(e)?e:e+" "+d+t),y=(exports.addLayoutHideCls=f,(e,t)=>!new RegExp(""+d+t+"\\s*").test(e)),v=(exports.hasLayoutArea=y,e=>{e=e||o.VIEWS.MONTH,e=(0,r.values)(o.VIEWS).indexOf(e);return e<0?o.View.month:1<<e}),A=(exports.viewFlag=v,e=>e===o.View.week||e===o.View.month||e===o.View.schedule),h=(exports.isView=A,e=>(0,r.values)(o.VIEWS)[Math.log2(e)]),m=(exports.flagView=h,(r=o.WEEKS)=>Array.from({length:r.length},(e,t)=>({key:"w_"+t,label:r[t]})));exports.initWeeks=m;